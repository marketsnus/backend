<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Documentation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism.min.css">
    <style>
        .method {
            padding: 3px 10px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 14px;
        }
        .get { background-color: #61affe; color: white; }
        .post { background-color: #49cc90; color: white; }
        .delete { background-color: #f93e3e; color: white; }
        .endpoint {
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        .response-example {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            margin-top: 10px;
        }
        .nav-pills .nav-link.active {
            background-color: #0d6efd;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Боковое меню -->
            <div class="col-md-3 col-lg-2 d-md-block bg-light sidebar p-3">
                <div class="position-sticky">
                    <nav class="nav flex-column nav-pills">
                        <a class="nav-link active" href="#intro">Введение</a>
                        <a class="nav-link" href="#promo">Промо акции</a>
                        <a class="nav-link" href="#bestsales">Топ продаж</a>
                        <a class="nav-link" href="#metadata">Метаданные</a>
                        <a class="nav-link" href="#payment">Платежные данные</a>
                        <a class="nav-link" href="#admin">Админ панель</a>
                        <a class="nav-link" href="#errors">Обработка ошибок</a>
                        <a class="nav-link" href="#new_products">Новинки</a>
                    </nav>
                </div>
            </div>

            <!-- Основной контент -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 py-4">
                <h1>API Documentation</h1>
                
                <section id="intro" class="mb-5">
                    <h2>Введение</h2>
                    <p>API предоставляет доступ к данным интернет-магазина. Все запросы возвращают данные в формате JSON.</p>
                    <div class="alert alert-info">
                        <strong>Базовый URL:</strong> http://your-domain.com/api
                    </div>
                </section>

                <section id="promo" class="mb-5">
                    <h2>Промо акции</h2>
                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <code>/api/promo</code>
                        <p class="mt-2">Получение списка всех промо акций</p>
                        <h5>Пример ответа:</h5>
                        <pre class="response-example"><code>{
    "success": true,
    "products": [
        {
            "id": "uuid-string",
            "filename": "promo1.jpg",
            "title": "Летняя распродажа",
            "description": "Скидки до 50%",
            "s3_url": "https://storage.yandexcloud.net/...",
            "created_at": "2024-01-20 15:30:00"
        }
    ]
}</code></pre>
                    </div>
                </section>

                <section id="bestsales" class="mb-5">
                    <h2>Топ продаж</h2>
                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <code>/api/bestSales</code>
                        <p class="mt-2">Получение списка товаров из топ продаж</p>
                        <h5>Пример ответа:</h5>
                        <pre class="response-example"><code>{
    "success": true,
    "products": [
        {
            "id": "uuid-string",
            "filename": "product1.jpg",
            "name": "Product Name",
            "category": "category",
            "price": 1999.99,
            "s3_url": "https://storage.yandexcloud.net/...",
            "created_at": "2024-01-20 15:30:00"
        }
    ]
}</code></pre>
                    </div>
                </section>

                <section id="metadata" class="mb-5">
                    <h2>Метаданные</h2>
                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <code>/api/metadata</code>
                        <p class="mt-2">Получение метаданных сайта</p>
                        <h5>Пример ответа:</h5>
                        <pre class="response-example"><code>{
    "success": true,
    "support_link": "https://t.me/support",
    "maintenance_mode": false,
    "category_images": {
        "snus": "https://storage.yandexcloud.net/...",
        "disposable": "https://storage.yandexcloud.net/...",
        "liquids": "https://storage.yandexcloud.net/...",
        "pod_systems": "https://storage.yandexcloud.net/...",
        "accessories": "https://storage.yandexcloud.net/..."
    }
}</code></pre>
                    </div>
                </section>

                <section id="payment" class="mb-5">
                    <h2>Платежные данные</h2>
                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <code>/api/payment</code>
                        <p class="mt-2">Получение активных платежных данных</p>
                        <h5>Пример ответа:</h5>
                        <pre class="response-example"><code>{
    "success": true,
    "payments": [
        {
            "id": 1,
            "account_number": "1234567890",
            "bank_name": "Сбербанк",
            "recipient_name": "Иван Иванов",
            "active": true
        }
    ]
}</code></pre>
                    </div>

                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <code>/api/payments/all</code>
                        <p class="mt-2">Получение всех платежных данных</p>
                        <h5>Пример ответа:</h5>
                        <pre class="response-example"><code>{
    "success": true,
    "payments": [
        {
            "id": 1,
            "account_number": "1234567890",
            "bank_name": "Сбербанк",
            "recipient_name": "Иван Иванов",
            "active": true,
            "created_at": "2024-01-20 15:30:00"
        }
    ]
}</code></pre>
                    </div>
                </section>

                <section id="admin" class="mb-5">
                    <h2>Админ панель</h2>
                    <div class="card">
                        <div class="card-body">
                            <h5>Доступ к админ панели</h5>
                            <p>По умолчанию создается пользователь:</p>
                            <ul>
                                <li><strong>Логин:</strong> admin</li>
                                <li><strong>Пароль:</strong> admin</li>
                            </ul>
                            <div class="alert alert-warning">
                                Рекомендуется изменить пароль после первого входа!
                            </div>
                        </div>
                    </div>
                </section>

                <section id="errors" class="mb-5">
                    <h2>Обработка ошибок</h2>
                    <div class="card">
                        <div class="card-body">
                            <h5>Коды ответов</h5>
                            <ul>
                                <li><strong>200:</strong> Успешный запрос</li>
                                <li><strong>400:</strong> Неверный запрос</li>
                                <li><strong>404:</strong> Ресурс не найден</li>
                                <li><strong>500:</strong> Внутренняя ошибка сервера</li>
                            </ul>
                            <h5>Пример ошибки:</h5>
                            <pre class="response-example"><code>{
    "success": false,
    "error": "Описание ошибки"
}</code></pre>
                        </div>
                    </div>
                </section>

                <section id="new_products" class="mb-5">
                    <h2>Новинки</h2>
                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <code>/api/new_products</code>
                        <p class="mt-2">Получение списка всех новинок</p>
                        <h5>Пример ответа:</h5>
                        <pre class="response-example"><code>{
    "success": true,
    "products": [
        {
            "id": "uuid-string",
            "name": "Название новинки",
            "description": "Описание новинки",
            "s3_url": "https://storage.yandexcloud.net/...",
            "created_at": "2024-02-16 15:30:00"
        }
    ]
}</code></pre>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/prism.min.js"></script>
    <script>
        // Активация текущего пункта меню при скролле
        window.addEventListener('scroll', function() {
            const sections = document.querySelectorAll('section');
            const navLinks = document.querySelectorAll('.nav-link');
            
            sections.forEach(section => {
                const rect = section.getBoundingClientRect();
                if (rect.top <= 100 && rect.bottom >= 100) {
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href') === '#' + section.id) {
                            link.classList.add('active');
                        }
                    });
                }
            });
        });
    </script>
</body>
</html> 